<div class="creator">
    <div id="header">
        <input name="title" class="input" type="text" 
         placeholder="Show Title"
         [(ngModel)]="show.title"
         (ngModelChange)="onChange()"/>

        <div>
            <button id="save" class="btn primary" (click)="saveShow()"
            [disabled]="isSaved || !show.title.trim()">
                <p>Save</p>
                <img src="assets/icons/save.svg" class="icon" alt="">
            </button>

            <button id="Export" class="btn primary" [disabled]="true">
                <p>Export</p>
                <img src="assets/icons/export.svg" class="icon" alt="">
            </button>
        </div>
    </div>

    
     <div class="scene-creator">
        <ng-container *ngIf="currScene then sceneTabs; else noScene"></ng-container>
    </div>

    <div class="scene-list">
        <div>
            <p class="title">Scenes ({{show.scenes.length}})</p>
            <button class="btn primary" (click)="newScene()">New Scene</button>
        </div>

        <creator-scene-list 
        [scenes]="show.scenes"
        (deleteClickedEvent)="onDelete($event)"
        (listDragDropEvent)="isSaved=false">
        </creator-scene-list>
    </div>
</div>



<ng-template #sceneTabs>
    <div class="scene-title">
        <input name="title" type="text" class="bare title" 
         [(ngModel)]="currScene!.title" (ngModelChange)="onChange()"
         placeholder="Scene Title">
        <ng-container [ngTemplateOutlet]="x"></ng-container>
    </div>
    
    <tabs>
        <tab name="Position" [isActive]="true">
            <scene-position id="scene-pos"
            [isAutoMode]="isAutoMode"
            [(ngModel)]="currScene!.geoPos"
            (ngModelChange)="onChange()">
            </scene-position>
        </tab>

        <tab name="Options">
            <scene-options 
            [(ngModel)]="currScene!.sceneOptions"
            (ngModelChange)="onChange()">
            </scene-options>
        </tab>
        
        <tab name="Transition">
            <div class="transition">
                <p>How long it takes OpenSpace to fly to the selected target</p>
                
                <input class="input" [formControl]="transitionControl" type="text" 
                placeholder="Transition Duration" name="transistion" id="transition"/>
        
                <p class="error" *ngIf="!transitionControl.valid">The field is digits only</p>
            </div>
        </tab>

        <tab name="Script">
            <textarea id="script" class="input" 
             cols="30" rows="20"
             [(ngModel)]="currScene!.script" 
             (ngModelChange)="onChange()"
             placeholder="Script Text">
            </textarea>
        </tab>
    </tabs>

    <div id="options">
        <button id="reset">Reset</button>
        <button id="save" class="btn secondary" 
        (click)="saveScene()"
        [disabled]="!currScene!.title.trim()">Save</button>
    </div>
</ng-template>


<ng-template #noScene>
    <div id="no-scene">
        <h1>No Scene Selected</h1>
    </div>
</ng-template>

<ng-template #x>
    <svg (click)="currScene!.title=''" id="x" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
</ng-template>